<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Situs Nonton MP4 - Demo</title>
  <style>
    :root{ --bg:#0f1724; --card:#0b1220; --muted:#9aa4b2; --accent:#06b6d4; }
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, Arial, sans-serif; margin:0; min-height:100vh; background:linear-gradient(180deg,#061025 0%, #07122a 100%); color:#e6f0f6}
    header{padding:20px; display:flex;align-items:center;gap:16px}
    h1{font-size:20px;margin:0}
    .container{max-width:1100px;margin:20px auto;padding:16px}
    .controls{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:18px}
    .input, button{padding:10px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.02);color:inherit}
    .input{min-width:260px}
    button.primary{background:linear-gradient(90deg,var(--accent),#3b82f6);border:0;color:#031022}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:12px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .thumb{width:100%;height:150px;background:#031022;border-radius:8px;display:flex;align-items:center;justify-content:center;color:var(--muted);overflow:hidden}
    video{width:100%;height:100%;object-fit:cover}
    .meta{margin-top:8px;display:flex;justify-content:space-between;align-items:center}
    .title{font-weight:600;font-size:14px}
    .muted{color:var(--muted);font-size:13px}
    .fullplayer{position:fixed;inset:0;background:rgba(2,6,23,0.85);display:flex;align-items:center;justify-content:center;padding:20px}
    .player-box{width:100%;max-width:1000px;background:#071226;padding:12px;border-radius:12px}
    .close{background:transparent;border:0;color:#fff;font-size:18px}
    .note{color:var(--muted);font-size:13px;margin-top:8px}
    footer{padding:20px;text-align:center;color:var(--muted)}
    @media (max-width:540px){.thumb{height:120px}}
  </style>
</head>
<body>
  <header>
    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="24" height="24" rx="4" fill="#071226"/><path d="M5 6h14v12H5z" fill="#06b6d4" opacity="0.12"/><path d="M7 8h10v2H7z" fill="#06b6d4"/></svg>
    <div>
      <h1>Situs Nonton MP4 â€” Demo</h1>
      <div class="note">Tambahkan URL .mp4 atau pilih file lokal (hanya untuk pemutaran di browser saat ini).</div>
    </div>
  </header>

  <main class="container">
    <div class="controls">
      <input id="urlInput" class="input" placeholder="Masukkan URL video .mp4 (mis. https://...)" />
      <button id="addUrlBtn" class="primary">Tambah dari URL</button>

      <label class="input" style="display:inline-flex;align-items:center;gap:8px;cursor:pointer">
        Pilih file lokal
        <input id="fileInput" type="file" accept="video/mp4" style="display:none" />
      </label>

      <button id="clearBtn" class="input">Hapus semua</button>
    </div>

    <div id="grid" class="grid"></div>

    <div class="note">Catatan: file lokal hanya diputar di perangkat Anda (menggunakan object URL). Untuk mempublikasikan agar bisa diakses publik, unggah file MP4 ke layanan hosting (GitHub Pages untuk file kecil, Firebase Storage, Cloudflare R2, S3, atau penyedia CDN) lalu gunakan URL publik di kolom URL di atas.</div>
  </main>

  <footer>
    Dibuat untuk demo â€” siap dipakai & dipublish (lihat komentar di kode untuk petunjuk hosting).
  </footer>

  <!-- Player Overlay -->
  <div id="playerOverlay" class="fullplayer" style="display:none">
    <div class="player-box">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <div id="playerTitle" style="font-weight:700"></div>
        <button id="closePlayer" class="close">âœ•</button>
      </div>
      <video id="mainVideo" controls style="width:100%;height:560px;background:#000" preload="metadata"></video>
    </div>
  </div>

  <script>
    // Simple MP4 video gallery.
    // - You can add videos by URL (works if the host allows range requests and CORS) or choose a local MP4 file.
    // - Local files are not uploaded anywhere; they use object URLs and play only on your device.
    // Deployment tips (manual):
    // 1) GitHub Pages: okay for small MP4s (<100MB typically); large files will exceed repo limits and are NOT recommended.
    // 2) For public hosting of big MP4s use: Firebase Storage, Amazon S3 + CloudFront, Cloudflare R2, or specialized video hosts. Then paste the public URL into the URL box.

    const grid = document.getElementById('grid');
    const urlInput = document.getElementById('urlInput');
    const addUrlBtn = document.getElementById('addUrlBtn');
    const fileInput = document.getElementById('fileInput');
    const clearBtn = document.getElementById('clearBtn');
    const playerOverlay = document.getElementById('playerOverlay');
    const mainVideo = document.getElementById('mainVideo');
    const playerTitle = document.getElementById('playerTitle');
    const closePlayer = document.getElementById('closePlayer');

    // load sample list from localStorage (only metadata: title + url)
    let videos = JSON.parse(localStorage.getItem('mp4_videos') || '[]');

    function save() { localStorage.setItem('mp4_videos', JSON.stringify(videos)); }

    function makeCard(v){
      const card = document.createElement('div'); card.className='card';
      const thumb = document.createElement('div'); thumb.className='thumb';
      const vid = document.createElement('video'); vid.src = v.url; vid.muted = true; vid.playsInline = true; vid.preload = 'metadata';
      vid.addEventListener('error', ()=>{ thumb.textContent = 'Preview tidak tersedia'; thumb.style.color='var(--muted)'; });
      vid.addEventListener('loadeddata', ()=>{ thumb.innerHTML=''; thumb.appendChild(vid); });
      thumb.appendChild(document.createTextNode('Memuat...'));

      const meta = document.createElement('div'); meta.className='meta';
      const title = document.createElement('div'); title.className='title'; title.textContent = v.title || (v.url.split('/').pop() || 'Video');
      const actions = document.createElement('div');

      const playBtn = document.createElement('button'); playBtn.className='input'; playBtn.textContent='â–¶ Putar';
      playBtn.onclick = ()=>{ openPlayer(v); };

      const delBtn = document.createElement('button'); delBtn.className='input'; delBtn.textContent='ðŸ—‘ï¸'; delBtn.title='Hapus';
      delBtn.onclick = ()=>{ videos = videos.filter(x=>x.id!==v.id); save(); render(); }

      const embedBtn = document.createElement('button'); embedBtn.className='input'; embedBtn.textContent='Embed';
      embedBtn.onclick = ()=>{ prompt('HTML embed (copy):', `<video controls src="${v.url}" style="width:100%"></video>`); }

      actions.appendChild(playBtn); actions.appendChild(embedBtn); actions.appendChild(delBtn);
      meta.appendChild(title); meta.appendChild(actions);

      card.appendChild(thumb); card.appendChild(meta);
      return card;
    }

    function render(){
      grid.innerHTML='';
      videos.forEach(v=>grid.appendChild(makeCard(v)));
    }

    function openPlayer(v){
      playerTitle.textContent = v.title || v.url.split('/').pop();
      mainVideo.src = v.url;
      playerOverlay.style.display = 'flex';
      mainVideo.play().catch(()=>{});
    }

    closePlayer.onclick = ()=>{ mainVideo.pause(); mainVideo.src=''; playerOverlay.style.display='none'; }
    playerOverlay.addEventListener('click', (e)=>{ if(e.target===playerOverlay) closePlayer.onclick(); });

    addUrlBtn.onclick = ()=>{
      const url = urlInput.value.trim();
      if(!url) return alert('Masukkan URL file .mp4');
      if(!url.toLowerCase().endsWith('.mp4')){
        if(!confirm('URL tidak berakhir dengan .mp4. Tetap lanjutkan?')) return;
      }
      const id = Date.now().toString(36)+Math.random().toString(36).slice(2,8);
      videos.unshift({id, url, title: '', added: Date.now()}); save(); render(); urlInput.value='';
    }

    fileInput.addEventListener('change', async (ev)=>{
      const file = ev.target.files[0];
      if(!file) return;
      if(file.type !== 'video/mp4'){
        if(!confirm('File bukan MP4, tetap lanjut?')) return;
      }
      // Create object URL for local playback. Note: this URL is not public and will break after page closed.
      const objectUrl = URL.createObjectURL(file);
      const id = Date.now().toString(36)+Math.random().toString(36).slice(2,8);
      videos.unshift({id, url: objectUrl, title: file.name, local:true}); save(); render();
      // We do not persist file data to server. To publish: upload to public host and add the public URL.
    });

    clearBtn.onclick = ()=>{ if(confirm('Hapus semua video dari daftar?')){ videos=[]; save(); render(); } }

    // initial render
    render();
  </script>
</body>
</html>
